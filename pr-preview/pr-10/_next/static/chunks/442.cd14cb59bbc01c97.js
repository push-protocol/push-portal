"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{52442:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var n=r(57437),a=r(2265),u=r(92180),i=r(67130),o=r(5954);let c=()=>{var e;let t=(0,o.TH)(),[r,n]=(0,a.useState)(null!==(e=localStorage.getItem("access_token"))&&void 0!==e?e:"");return(0,a.useEffect)(()=>{if(t.hash){let e=new URLSearchParams(t.hash.substring(1)),r=e.get("access_token"),a=e.get("expires_in");r&&a&&(localStorage.setItem("access_token",r),localStorage.setItem("expires_in",a),n(r))}},[]),r};var s=()=>{let[e,t]=(0,a.useState)(null),r=c(),[o,s]=(0,a.useState)(r),{data:l}=(0,i.Zt)(o);return(0,a.useEffect)(()=>{r&&s(r)},[r]),(0,a.useEffect)(()=>{{let e=new URLSearchParams(window.location.hash.substring(1)),r=e.get("access_token");t(r)}},[]),(0,a.useEffect)(()=>{null===e&&window.close()},[e]),(0,n.jsx)(u.xuv,{width:"100vw",display:"flex",alignItems:"center",height:"100vh",justifyContent:"center",children:(0,n.jsxs)(u.xuv,{display:"flex",padding:"spacing-md",flexDirection:"column",alignItems:"center",width:"360px",gap:"spacing-xs",backgroundColor:"surface-primary",borderRadius:"radius-md",border:"border-sm solid stroke-secondary",children:[(0,n.jsx)(u.O55,{width:48,height:48}),(0,n.jsxs)(u.xuv,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,n.jsx)(u.xvT,{variant:"h4-semibold",color:"text-primary",children:"Complete Verification"}),(0,n.jsx)(u.xvT,{variant:"bs-regular",color:"text-tertiary",children:"Continue to complete the verification process."})]}),(0,n.jsx)(u.zxk,{onClick:()=>{l&&(localStorage.setItem("username",l.username),window.close())},children:"Continue"})]})})}},1529:function(e,t,r){r.d(t,{vK:function(){return d},id:function(){return p},$7:function(){return m},qo:function(){return i},hK:function(){return o},ol:function(){return y},gi:function(){return g},Zt:function(){return c},Q4:function(){return f},zE:function(){return x},BM:function(){return P}});var n=r(23629),a=r(53781),u=r(1575);let i=()=>(0,n.a)({queryKey:[a.HE],queryFn:u.E8}),o=(e,t)=>{let{userId:r,activityTypes:i}=e;return(0,n.a)({queryKey:[a.cY,r,i],queryFn:()=>(0,u.hg)(r,i),...t})},c=e=>{let t=(0,n.a)({queryKey:[a.O1,e],queryFn:()=>(0,u.IV)(e),enabled:!!e});return t};var s=r(14685),l=r(37471);let d=()=>(0,s.D)({mutationKey:[a.YY],mutationFn:l.Kz}),f=e=>(0,n.a)({queryKey:[a.fz,e.caip10WalletAddress],queryFn:()=>(0,l.sx)(e),retry:!1,enabled:!("eip155:0x0000000000000000000000000000000000000001"===e.caip10WalletAddress||!e.caip10WalletAddress)}),p=()=>(0,s.D)({mutationKey:[a.ph],mutationFn:l.GE});var h=r(67130);let m=(e,t)=>(0,n.a)({queryKey:[h.VU,null==e?void 0:e.userId,null==e?void 0:e.activities],queryFn:()=>(0,l.Pc)(e),enabled:t});var v=r(84173);let y=e=>{let{order:t,pageSize:r}=e;return(0,v.N)({queryKey:[a.rR],initialPageParam:1,queryFn:e=>{let{pageParam:n}=e;return(0,l.GQ)({order:t,pageSize:r,pageNumber:n})},getNextPageParam:e=>{let{page:t,total:r,pageSize:n}=e;return n*t>=r?null:t+1}})},g=e=>{let{order:t,pageSize:r}=e;return(0,v.N)({queryKey:[a.eB],initialPageParam:1,queryFn:e=>{let{pageParam:n}=e;return(0,l.SX)({order:t,pageSize:r,pageNumber:n})},getNextPageParam:e=>{let{page:t,total:r,pageSize:n}=e;return n*t>=r?null:t+1}})},x=e=>{let{userId:t}=e;return(0,n.a)({queryKey:[a.ix,t],queryFn:()=>(0,l.rN)(t),enabled:!!t})},P=()=>(0,s.D)({mutationKey:[a.sF],mutationFn:l.U$})},67130:function(e,t,r){r.d(t,{$7:function(){return n.$7},BM:function(){return n.BM},Q4:function(){return n.Q4},VU:function(){return a.VU},Zt:function(){return n.Zt},gi:function(){return n.gi},hK:function(){return n.hK},ol:function(){return n.ol},qo:function(){return n.qo},vK:function(){return n.vK},zE:function(){return n.zE}});var n=r(1529);r(37471);var a=r(53781)},53781:function(e,t,r){r.d(t,{HE:function(){return n},O1:function(){return i},VU:function(){return s},YY:function(){return a},cY:function(){return l},eB:function(){return f},fz:function(){return p},ix:function(){return o},ph:function(){return u},rR:function(){return d},sF:function(){return c}});let n="allActivities",a="claimRewards",u="createUserRewardsDetails",i="discordDetails",o="userXP",c="refreshUserXp",s="rewardActivityStatus",l="rewardsActivity",d="rewardsLeaderboardS1",f="rewardsLeaderboardS1",p="userRewardsDetails"},37471:function(e,t,r){r.d(t,{GE:function(){return n.GE},GQ:function(){return n.GQ},Kz:function(){return n.Kz},Pc:function(){return n.Pc},SX:function(){return n.SX},U$:function(){return n.U$},rN:function(){return n.rN},sx:function(){return n.sx}});var n=r(1575)},1575:function(e,t,r){r.d(t,{Kz:function(){return h},GE:function(){return g},Pc:function(){return P},E8:function(){return c},hg:function(){return l},GQ:function(){return w},SX:function(){return S},IV:function(){return f},sx:function(){return v},rN:function(){return K},U$:function(){return z}});var n=r(54829);let a=e=>({activities:e.activities,page:e.page,size:e.size,total:e.total});var u=r(2456);let i=u.Z.APP_ENV,o=()=>{switch(i){case"prod":return"https://us-east1-push-prod-apps.cloudfunctions.net/pushpointsrewardsystem";case"staging":return"https://us-east1-push-stage-apps.cloudfunctions.net/pushpointsrewardsystem";default:return"https://us-east1-push-dev-apps.cloudfunctions.net/helloWorld"}},c=()=>(0,n.default)({method:"GET",url:"".concat("".concat(o()),"/v2/activities/all"),params:{pageSize:300}}).then(e=>a(e.data)),s=e=>e,l=(e,t)=>{let r=t.join(",");return(0,n.default)({method:"GET",url:"".concat(o(),"/v2/users/").concat(e,"/activities/bytype?types=").concat(r)}).then(e=>s(e.data))},d=e=>e,f=e=>(0,n.default)({method:"GET",url:"https://discord.com/api/users/@me",headers:{Authorization:"Bearer ".concat(e)}}).then(e=>d(e.data)),p=e=>e,h=e=>(0,n.default)({method:"POST",url:"".concat(o(),"/v2/users/").concat(e.userId,"/activity/").concat(e.activityTypeId),data:{data:e.data,verificationProof:e.verificationProof},headers:{"Content-Type":"application/json"}}).then(e=>p(e.data)),m=e=>e,v=e=>{let{caip10WalletAddress:t}=e;return(0,n.default)({method:"GET",url:"".concat(o(),"/v2/users/wallet/").concat(t)}).then(e=>m(e.data))},y=e=>e,g=e=>(0,n.default)({method:"POST",url:"".concat(o(),"/v2/users/"),data:{userWallet:e.userWallet,data:e.data,verificationProof:e.verificationProof,refPrimary:e.refPrimary},headers:{"Content-Type":"application/json"}}).then(e=>y(e.data)),x=e=>e,P=e=>{let t=e.activities.join(",");return(0,n.default)({method:"GET",url:"".concat(o(),"/v2/users/").concat(e.userId,"/recent-activities/v2?types=").concat(t),headers:{"Content-Type":"application/json"}}).then(e=>x(e.data))},E=e=>({users:e.users.map(e=>({userId:e.userId,userWallet:e.userWallet,totalPoints:e.totalPoints,rank:e.rank})),page:e.page,pageSize:e.pageSize,total:e.total}),w=async e=>{let{order:t,pageSize:r,pageNumber:a}=e;return(0,n.default)({method:"GET",url:"".concat(o(),"/users/leaderboard"),params:{order:t||"desc",pageSize:r||20,pageNumber:a||1}}).then(e=>E(e.data))},S=async e=>{let{order:t,pageSize:r,pageNumber:a}=e;return(0,n.default)({method:"GET",url:"".concat(o(),"/v2/users/leaderboard"),params:{order:t||"desc",pageSize:r||20,pageNumber:a||1}}).then(e=>E(e.data))},b=e=>e,K=async e=>(0,n.default)({method:"GET",url:"".concat(o(),"/v2/user-app-xp/user/").concat(e,"/xp")}).then(e=>b(e.data)),q=e=>e,z=async e=>(0,n.default)({method:"PUT",url:"".concat(o(),"/v2/user-app-xp/user/").concat(null==e?void 0:e.userId,"/xp/refresh")}).then(e=>q(e.data))}}]);